############################ 引用目录 ########################################
-include ../dirs.mk
include  ../config.mk
include  ../toolchain.mk

# 编译参数
CFLAGS  += -o
LDFLAGS += -L../mcompat_drv -lmcompat_drv -Wl,-rpath /lib
##############################################################################

############################### 目录 ##########################################
# 通用目录
APP_PATH     = $(SRC_DIR)/app
MODULE_PATH  = $(SRC_DIR)/module
API_PATH     = $(SRC_DIR)/api
ADAPTER_PATH = $(SRC_DIR)/adapter
DRV_PATH     = $(SRC_DIR)/drv
PLT_PATH     = $(SRC_DIR)/zynq
MISC_PATH    = $(SRC_DIR)/misc

VPATH        = $(APP_PATH)
##############################################################################

############################## C编文件 #######################################

# 需要编译的c文件
C_FILES      = miner_api.c
##############################################################################

############################# inc目录 #########################################
INCLUDE += -I$(MODULE_PATH) -I$(SRC_DIR) -I$(API_PATH) -I$(ADAPTER_PATH) \
	   -I$(DRV_PATH) -I$(PLT_PATH) -I$(MISC_PATH)
##############################################################################

########################### 构建依赖关系 ##################################### 
OBJ     = $(patsubst %.c,$(OBJ_DIR)/%.o,$(C_FILES))
LINT_F  = $(patsubst %.c,$(OBJ_DIR)/%.lint,$(C_FILES))
##############################################################################

############################### 目标 ########################################
TARGET=miner_api
##############################################################################

all: $(TARGET)

install:
	@echo [Install... $(TARGET)]
	$(QUIET)$(CP) $(TARGET) $(RELEASE_BIN_DIR)

-include ../common.mk

